<div class="bg-m0 flex h-full w-full flex-col rounded shadow">
  <div class="mb-6 mt-6 flex h-11 flex-shrink-0 flex-row items-center">
    <div class="ml-6 flex-shrink-0">
      <button
        type="button"
        class="border-s400 text-s500 hover:bg-s100 flex select-none flex-row items-center rounded border p-4 py-2 focus:outline-none"
        (click)="newSession()"
      >
        <div>New Session</div>
      </button>
    </div>

    <div class="flex flex-1"></div>

    <div *ngIf="isRefreshing" class="relative flex h-7 w-7 flex-shrink-0">
      <ngx-spinner
        [name]="spinnerName"
        color="#0084d1"
        bdColor="#00000000"
        size="default"
        type="ball-clip-rotate"
        [fullScreen]="false"
        [disableAnimation]="true"
        [zIndex]="99998"
      >
      </ngx-spinner>
    </div>

    <button
      tp="Refresh sessions"
      type="button"
      class="hover:bg-m200 ml-5 mr-12 flex h-9 w-9 flex-shrink-0 items-center justify-center rounded focus:outline-none"
      (click)="loadSessions()"
    >
      <m-refresh-icon></m-refresh-icon>
    </button>
  </div>

  <div class="divide-s300 ml-6 mr-6 flex flex-col divide-y">
    <div class="flex flex-row"></div>
    <div class="flex flex-row"></div>
  </div>

  <div
    *ngIf="sessions.length === 0"
    class="flex h-full w-full select-none items-center justify-center text-xl"
  >
    Sessions are empty
  </div>

  <div
    *ngIf="sessions.length > 0"
    class="flex h-2 w-full flex-grow flex-col overflow-y-auto"
  >
    <ng-scrollbar
      [orientation]="'vertical'"
      [visibility]="'hover'"
      [appearance]="'compact'"
    >
      <div class="mt-2 h-full w-full pb-6">
        <div
          *ngFor="let session of sessions"
          class="hover:bg-m50 ml-6 mr-5 flex cursor-pointer select-none flex-col rounded py-2 pl-3 pr-3"
          (click)="openSession(session)"
        >
          <div class="flex items-center justify-between">
            <span
              class="truncate text-base"
              [ngClass]="{
                'text-m600 font-semibold': session.sessionId === sessionId,
                'text-s1': session.sessionId !== sessionId
              }"
              >{{ session.displayTitle }}</span
            >
            <span
              class="ml-2 flex-shrink-0 text-sm"
              [ngClass]="{
                'text-m600': session.sessionId === sessionId,
                'text-s600': session.sessionId !== sessionId
              }"
              >{{ session.timeAgo }}</span
            >
          </div>
          <div class="mt-1 flex items-center space-x-2">
            <span
              class="text-sm"
              [ngClass]="{
                'text-m600': session.sessionId === sessionId,
                'text-s600': session.sessionId !== sessionId
              }"
              >{{ session.providerLabel }}</span
            >
            <span
              class="text-sm"
              [ngClass]="{
                'text-m600': session.sessionId === sessionId,
                'text-s600': session.sessionId !== sessionId
              }"
              >{{ session.agent }}</span
            >
            <span
              class="rounded-full px-2 py-0.5 text-sm"
              [ngClass]="{
                'bg-blue-100 text-blue-700': session.status === 'New',
                'bg-green-100 text-green-700': session.status === 'Active',
                'bg-yellow-100 text-yellow-700': session.status === 'Paused',
                'bg-red-100 text-red-700':
                  session.status === 'Stopped' ||
                  session.status === 'Error' ||
                  session.status === 'Expired'
              }"
              >{{ session.status }}</span
            >
          </div>
        </div>
      </div>
    </ng-scrollbar>
  </div>
</div>
<div *ngIf="sessions$ | async"></div>
<div *ngIf="session$ | async"></div>
<div *ngIf="interval$ | async"></div>
