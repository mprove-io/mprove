<div class="bg-m0 flex h-full w-full flex-col rounded shadow">
  <div class="mb-6 mt-6 flex h-11 flex-shrink-0 flex-row items-center">
    <div class="ml-6 flex-shrink-0">
      <button
        type="button"
        class="border-s400 text-s500 hover:bg-s100 flex select-none flex-row items-center rounded border p-4 py-2 focus:outline-none"
        (click)="newSession()"
      >
        <div>New Session</div>
      </button>
    </div>

    <div class="ml-3 flex-shrink-0">
      <button
        type="button"
        class="flex select-none flex-row items-center rounded px-3 py-2 text-xs focus:outline-none"
        [ngClass]="{
          'bg-blue-100 text-blue-700': debugMode,
          'text-s500 hover:bg-s100': !debugMode
        }"
        (click)="toggleDebug()"
      >
        Debug
      </button>
    </div>
  </div>

  <div class="divide-s300 ml-6 mr-6 flex flex-col divide-y">
    <div class="flex flex-row"></div>
    <div class="flex flex-row"></div>
  </div>

  <div
    *ngIf="sessions.length === 0"
    class="flex h-full w-full select-none items-center justify-center text-xl"
  >
    Sessions are empty
  </div>

  <div
    *ngIf="sessions.length > 0"
    class="flex h-2 w-full flex-grow flex-col overflow-y-auto"
  >
    <ng-scrollbar [orientation]="'vertical'" [visibility]="'hover'">
      <div class="mt-2 h-full w-full">
        <div
          *ngFor="let session of sessions"
          class="hover:bg-m50 ml-6 mr-5 flex cursor-pointer select-none flex-col rounded py-2 pl-3 pr-3"
          (click)="openSession(session)"
        >
          <div class="flex items-center justify-between">
            <span
              class="text-sm"
              [ngClass]="{
                'text-m600 font-semibold': session.sessionId === sessionId,
                'text-s1': session.sessionId !== sessionId
              }"
              >{{ session.agent }}</span
            >
            <span
              class="text-xs"
              [ngClass]="{
                'text-m600': session.sessionId === sessionId,
                'text-s600': session.sessionId !== sessionId
              }"
              >{{ lastActivityTimes[session.sessionId] }}</span
            >
          </div>
          <div class="mt-1 flex items-center space-x-2">
            <span
              class="text-xs"
              [ngClass]="{
                'text-m600': session.sessionId === sessionId,
                'text-s600': session.sessionId !== sessionId
              }"
              >{{ session.agentMode }}</span
            >
            <span
              class="rounded-full px-2 py-0.5 text-xs"
              [ngClass]="{
                'bg-green-100 text-green-700': session.status === 'Active',
                'bg-yellow-100 text-yellow-700': session.status === 'Paused',
                'bg-red-100 text-red-700':
                  session.status === 'Stopped' ||
                  session.status === 'Error' ||
                  session.status === 'Expired'
              }"
              >{{ session.status }}</span
            >
          </div>
        </div>
      </div>
    </ng-scrollbar>
  </div>
</div>
<div *ngIf="sessions$ | async"></div>
<div *ngIf="session$ | async"></div>
<div *ngIf="debugMode$ | async"></div>
<div *ngIf="interval$ | async"></div>
