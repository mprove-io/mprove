<div class="flex h-full w-full flex-col items-center">
  <div class="h-[40%] flex-shrink-0"></div>
  <div class="flex w-full max-w-[860px] flex-col px-6">
    <div class="text-s1 mb-10 text-center text-3xl font-semibold">Chat</div>

    <div class="border-s3 overflow-hidden rounded-3xl border">
      <div
        #scrollContainer
        class="thin-scrollbar mr-3 max-h-[400px] overflow-y-auto"
      >
        <div class="flex w-full flex-row items-end pl-5 pr-2">
          <textarea
            class="text-s1 min-w-0 flex-1 resize-none overflow-y-hidden bg-transparent py-4 text-lg leading-relaxed placeholder-gray-400 [field-sizing:content] focus:outline-none"
            placeholder="Ask anything"
            [(ngModel)]="messageText"
            (keydown)="onKeyDown($event)"
            [disabled]="isSubmitting"
            rows="1"
          ></textarea>

          <button
            class="sticky bottom-2 mb-2 ml-3 flex h-11 w-11 flex-shrink-0 items-center justify-center rounded-full focus:outline-none"
            [ngClass]="{
              'bg-m600 cursor-pointer': messageText.trim() && !isSubmitting,
              'bg-s300 cursor-default': !messageText.trim() || isSubmitting
            }"
            (click)="sendMessage()"
            [disabled]="!messageText.trim() || isSubmitting"
          >
            <m-arrow-up-icon class="text-white"></m-arrow-up-icon>
          </button>
        </div>
      </div>
    </div>

    <div class="ml-[15%] mt-4 flex flex-row items-center space-x-3">
      <ng-select
        class="sessions-select w-[140px] select-none text-sm"
        [items]="agents"
        [clearable]="false"
        [searchable]="false"
        [(ngModel)]="agent"
        [disabled]="isSubmitting"
        appendTo="body"
        placeholder="Agent"
      ></ng-select>

      <ng-select
        class="sessions-select w-[140px] select-none text-sm"
        [items]="agentModes"
        [clearable]="false"
        [searchable]="false"
        [(ngModel)]="agentMode"
        [disabled]="isSubmitting"
        appendTo="body"
        placeholder="Mode"
      ></ng-select>
    </div>
  </div>
</div>
