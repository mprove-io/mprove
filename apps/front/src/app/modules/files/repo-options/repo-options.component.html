<div tp="Need to Save changes" [tpIsEnabled]="needSave === true">
  <button
    data-cy="repoOptionsMenuButton"
    class="flex h-9 w-9 flex-shrink-0 items-center justify-center rounded focus:outline-none"
    [ngClass]="{
      'cursor-default': needSave === true,
      'hover:bg-blue-200': needSave === false
    }"
    [disabled]="needSave === true"
    #t1="tippy"
    [tp]="templateRepoOptions"
    [tpHideOnEscape]="true"
    tpVariation="menu"
    className="my-menu"
  >
    <m-dots-vertical-icon></m-dots-vertical-icon>
  </button>
</div>

<ng-template #templateRepoOptions>
  <div class="border-gray4 w-64 rounded-md border-2 bg-white shadow-xl">
    <button
      data-cy="repoOptionsRevertRepoToLastCommitButton"
      class="text-gray1 hover:bg-blue4 w-full px-4 py-2 text-left text-base focus:outline-none"
      [ngClass]="{
        'cursor-default text-gray-400': needSave === true
      }"
      [disabled]="needSave === true"
      (click)="t1.hide(); revertToLastCommit($event)"
      >Revert to Last Commit</button
    >

    <button
      data-cy="repoOptionsRevertRepoToRemoteButton"
      class="text-gray1 hover:bg-blue4 w-full px-4 py-2 text-left text-base focus:outline-none"
      [ngClass]="{
        'cursor-default text-gray-400': needSave === true
      }"
      [disabled]="needSave === true"
      (click)="t1.hide(); revertToRemote($event)"
      >Revert to Remote</button
    >

    <button
      data-cy="repoOptionsPullFromRemoteButton"
      class="text-gray1 hover:bg-blue4 w-full px-4 py-2 text-left text-base focus:outline-none"
      [ngClass]="{
        'cursor-default text-gray-400':
          needSave === true || repo?.repoStatus === repoStatusNeedCommit
      }"
      [disabled]="
        needSave === true || repo?.repoStatus === repoStatusNeedCommit
      "
      (click)="t1.hide(); pullFromRemote($event)"
      >Pull from Remote</button
    >

    <button
      data-cy="repoOptionsGitFetchButton"
      class="text-gray1 hover:bg-blue4 w-full px-4 py-2 text-left text-base focus:outline-none"
      [ngClass]="{
        'cursor-default text-gray-400': needSave === true
      }"
      [disabled]="needSave === true"
      (click)="t1.hide(); gitFetch($event)"
      >Git Fetch</button
    >

    <button
      data-cy="repoOptionsValidateButton"
      class="text-gray1 hover:bg-blue4 w-full px-4 py-2 text-left text-base focus:outline-none"
      [ngClass]="{
        'cursor-default text-gray-400': needSave === true
      }"
      [disabled]="needSave === true"
      (click)="t1.hide(); validate($event)"
      >Validate (rebuild)</button
    >
  </div>
</ng-template>

<div *ngIf="nav$ | async"></div>
<div *ngIf="file$ | async"></div>
<div *ngIf="needSave$ | async"></div>
<div *ngIf="panel$ | async"></div>
<div *ngIf="repo$ | async"></div>
