<div class="relative">
  <button
    class="h-7 w-7 z-10 border-2 border-gray-500 rounded focus:outline-none align-middle"
    [ngStyle]="{ 'background-color': color }"
    [ngClass]="{
      'cursor-default': openedMenuId && menuId !== openedMenuId
    }"
    (click)="toggleMenu()"
    [disabled]="openedMenuId && menuId !== openedMenuId"
  >
    <div *ngIf="!color">U</div>
  </button>

  <button
    class="fixed inset-0 z-10 w-full h-full cursor-default focus:outline-none"
    *ngIf="isColorMenuOpen === true"
    (click)="closeMenu()"
  ></button>

  <div
    class="absolute left-0 mt-1 w-56 z-10 bg-white rounded-md shadow-xl border-2 border-gray4"
    *ngIf="isColorMenuOpen === true"
  >
    <color-sketch
      [color]="rgbaColor"
      (onChangeComplete)="onChangeComplete($event)"
    ></color-sketch>

    <div class="flex flex-row justify-between bg-white">
      <button
        class="block px-3 py-2 bg-blue3 rounded text-white font-medium text-sm focus:outline-none"
        (click)="save()"
        >Save</button
      >

      <button
        class="block px-3 py-2 bg-blue3 rounded text-white font-medium text-sm focus:outline-none"
        (click)="cancel()"
        >Cancel</button
      >

      <button
        class="block px-3 py-2 bg-blue3 rounded text-white font-medium text-sm focus:outline-none"
        (click)="clear()"
        >Undef</button
      >
    </div>
  </div>
</div>

<div *ngIf="openedMenuId$ | async"></div>
