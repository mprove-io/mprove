<div class="group h-full w-full bg-white border border-white rounded shadow-md">
  <div class="mx-5 h-full">
    <div class="flex flex-col h-full w-full">
      <div
        class="mt-8 mx-5 mb-5 flex flex-row text-lg text-gray1 justify-center items-start flex-shrink-0"
      >
        <div class="w-9 mr-3"></div>

        <div
          class="flex flex-col flex-grow max-h-[60px] text-gray1 hover:text-blue-500 justify-start items-center cursor-pointer"
          (click)="showChart()"
        >
          <div
            class="flex flex-col items-center max-h-[60px] mt-[2px] text-center line-clamp-2"
          >
            {{ title }}
          </div>
        </div>

        <div class="flex w-9 h-9 relative flex-shrink-0">
          <ngx-spinner
            [name]="report.mconfigId"
            color="rgba(54, 94, 224, 100)"
            bdColor="rgba(0, 0, 0, 0)"
            size="default"
            type="ball-clip-rotate"
            [fullScreen]="false"
            [disableAnimation]="true"
            [zIndex]="99998"
          >
          </ngx-spinner>
        </div>

        <div class="relative ml-3">
          <button
            data-cy="repOptionsMenuButton"
            class="flex relative z-9 h-9 w-9 rounded focus:outline-none items-center justify-center hover:bg-blue-200 invisible group-hover:visible"
            [ngClass]="{
              'cursor-default text-gray-400':
                openedMenuId && menuId !== openedMenuId
            }"
            (click)="toggleMenu($event)"
            [disabled]="openedMenuId && menuId !== openedMenuId"
          >
            <m-dots-vertical-icon></m-dots-vertical-icon>
          </button>

          <button
            class="fixed inset-0 z-9 w-full h-full cursor-default focus:outline-none"
            *ngIf="isRepOptionsMenuOpen === true"
            (click)="closeMenu($event)"
          ></button>

          <div
            class="absolute right-0 mt-1 w-64 z-9 bg-white rounded-md shadow-xl border-2 border-gray4"
            *ngIf="isRepOptionsMenuOpen === true"
          >
            <button
              data-cy="repOptionsRun"
              class="px-4 py-2 text-gray1 hover:bg-blue2 text-base w-full text-left focus:outline-none"
              (click)="run($event)"
              >Run</button
            >

            <button
              data-cy="repOptionsExplore"
              class="px-4 py-2 text-gray1 hover:bg-blue2 text-base w-full text-left focus:outline-none"
              [ngClass]="{
                'cursor-default text-gray-400': canAccessModel === false
              }"
              (click)="explore($event)"
              [disabled]="canAccessModel === false"
              >Explore</button
            >

            <!-- <button
              data-cy="repOptionsEditInfo"
              class="px-4 py-2 text-gray1 hover:bg-blue2 text-base w-full text-left focus:outline-none"
              [ngClass]="{
                'cursor-default text-gray-400': canEditOrDeleteRep === false
              }"
              (click)="editVizInfo($event)"
              [disabled]="canEditOrDeleteRep === false"
              >Edit Info</button
            > -->

            <!-- <button
              data-cy="repOptionsGoToFile"
              class="px-4 py-2 text-gray1 hover:bg-blue2 text-base w-full text-left focus:outline-none"
              (click)="goToFile($event)"
              >Go to file</button
            > -->

            <!-- <button
              data-cy="repOptionsDelete"
              class="px-4 py-2 text-gray1 hover:bg-blue2 text-base w-full text-left focus:outline-none"
              [ngClass]="{
                'cursor-default text-gray-400': canEditOrDeleteRep === false
              }"
              (click)="deleteViz($event)"
              [disabled]="canEditOrDeleteRep === false"
              >Delete</button
            > -->
          </div>
        </div>
      </div>

      <m-bricks
        class="flex flex-row mx-7 mb-5 max-h-[120px] items-start justify-start overflow-auto max-w-max flex-shrink-0"
        *ngIf="showBricks === true && mconfig?.filters.length > 0"
        [extendedFilters]="extendedFilters"
      ></m-bricks>

      <div
        class="flex flex-grow w-full pt-5 px-7 pb-10 rounded bg-white cursor-default overflow-auto"
        (click)="stopClick($event)"
      >
        <m-chart-view
          *ngIf="!!model"
          [ngClass]="{
            'max-w-max':
              mconfig?.chart.type === chartTypeEnumTable &&
              isSelectValid === true &&
              mconfig?.chart.isValid === true &&
              qData?.length > 0
          }"
          class="w-full h-full"
          [sortedColumns]="sortedColumns"
          [qData]="qData"
          [chart]="mconfig?.chart"
          [queryStatus]="query?.status"
        ></m-chart-view>
      </div>
    </div>
  </div>
</div>
<div class="text-blue1 cursor-default invisible">{{ randomId }}</div>

<div *ngIf="openedMenuId$ | async"></div>
<div *ngIf="nav$ | async"></div>
