<div class="flex h-full w-full flex-col">
  <div
    class="relative flex h-16 flex-shrink-0 items-center overflow-auto px-6 shadow"
  >
    <m-logo></m-logo>

    <!-- <div class="flex flex-1"></div> -->
    <!-- <div class="flex flex-1"></div> -->

    <div class="ml-10 flex flex-row items-center">
      <div *ngIf="!!nav && !!nav.projectId" class="flex flex-row items-center">
        <div class="select-none font-semibold text-gray-400">Env</div>
        <m-env-select class="ml-5"></m-env-select>

        <div class="ml-10 select-none font-semibold text-gray-400">Branch</div>
        <m-branch-select class="ml-5"></m-branch-select>

        <div class="flex w-[240px] flex-row justify-start">
          <button
            class="text-s1 ml-7 block flex h-10 flex-row items-center justify-start text-left text-base focus:outline-none"
            [ngClass]="{
              'cursor-default text-gray-400':
                !nav || !nav.projectId || needSave === true,
              'font-semibold': isFilesRouteActive === true
            }"
            (click)="navigateFiles()"
            [disabled]="!nav || !nav.projectId || needSave === true"
          >
            <div
              class="flex flex-shrink-0 flex-row items-center justify-center"
            >
              <div
                class="ml-2 mr-2 flex h-8 w-8 flex-shrink-0 text-amber-500"
                *ngIf="nav.needValidate === true"
              >
                <m-exclamation-icon></m-exclamation-icon>
              </div>

              <div
                class="text-r1 ml-2 mr-2 flex h-8 w-8 flex-shrink-0"
                *ngIf="
                  nav.needValidate === false &&
                  (struct?.errors.length > 0 || repo?.conflicts.length > 0)
                "
              >
                <m-exclamation-icon></m-exclamation-icon>
              </div>

              <div class="flex w-[60px] items-center justify-center">Files</div>
            </div>
          </button>
        </div>
      </div>
    </div>

    <div class="flex flex-1"></div>

    <div
      *ngIf="!!nav && !!nav.projectId"
      class="flex flex-row items-center space-x-5"
    >
      <button
        class="text-s1 ml-5 block flex h-10 w-[80px] items-center justify-center text-left text-base focus:outline-none"
        [ngClass]="{
          'cursor-default text-gray-400':
            !nav || !nav.projectId || needSave === true,
          'font-semibold': isChartsRouteActive === true
        }"
        (click)="navigateCharts()"
        [disabled]="!nav || !nav.projectId || needSave === true"
        >Charts</button
      >

      <button
        class="text-s1 block flex h-10 w-[120px] items-center justify-center text-left text-base focus:outline-none"
        [ngClass]="{
          'cursor-default text-gray-400':
            !nav || !nav.projectId || needSave === true,
          'font-semibold': isDashboardsRouteActive === true
        }"
        (click)="navigateDashboards()"
        [disabled]="!nav || !nav.projectId || needSave === true"
        >Dashboards</button
      >

      <button
        class="text-s1 block flex h-10 w-[90px] items-center justify-center text-left text-base focus:outline-none"
        [ngClass]="{
          'cursor-default text-gray-400':
            !nav || !nav.projectId || needSave === true,
          'font-semibold': isReportsRouteActive === true
        }"
        (click)="navigateReports()"
        [disabled]="!nav || !nav.projectId || needSave === true"
        >Reports</button
      >
    </div>

    <div class="flex flex-1"></div>
    <div class="flex flex-1"></div>

    <div class="flex flex-row items-center">
      <div class="select-none font-semibold text-gray-400">Project</div>
      <m-project-menu></m-project-menu>
      <m-project-select class="ml-2"></m-project-select>

      <div class="ml-10 select-none font-semibold text-gray-400">Org</div>
      <m-org-menu></m-org-menu>
      <m-org-select class="ml-2"></m-org-select>

      <m-user-menu class="ml-3"></m-user-menu>
    </div>
  </div>

  <div class="h-2 flex-1 overflow-auto">
    <router-outlet></router-outlet>
  </div>
</div>

<div *ngIf="nav$ | async"></div>
<div *ngIf="repo$ | async"></div>
<div *ngIf="struct$ | async"></div>
<div *ngIf="member$ | async"></div>
<div *ngIf="needSave$ | async"></div>
<div *ngIf="routerEvents$ | async"></div>
