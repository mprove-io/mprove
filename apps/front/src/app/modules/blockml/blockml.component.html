<div class="flex flex-col h-full bg-blue1">
  <div class="flex flex-row h-full mx-6 mb-6 mt-8">
    <div class="flex flex-col flex-grow">
      <div class="flex flex-row justify-between items-center h-11">
        <div
          data-cy="blockmlTitle"
          class="flex font-semibold text-2xl text-gray1 items-center self-center"
          >BlockML
        </div>

        <div
          *ngIf="nav?.isRepoProd === false"
          class="flex flex-row space-x-3 items-center"
        >
          <button
            type="button"
            data-cy="blockmlCommitButton"
            class="py-2 px-5 text-white rounded font-medium focus:outline-none"
            [ngClass]="{
              'bg-gray-400 cursor-default':
                repo.repoStatus !== repoStatusNeedCommit || needSave === true,
              'bg-blue3':
                repo.repoStatus === repoStatusNeedCommit && needSave === false
            }"
            (click)="commit()"
            [disabled]="
              repo.repoStatus !== repoStatusNeedCommit || needSave === true
            "
            >Commit</button
          >

          <button
            type="button"
            data-cy="blockmlCommitButton"
            class="py-2 px-5 text-white rounded font-medium focus:outline-none"
            *ngIf="repo.repoStatus === repoStatusNeedPull"
            [ngClass]="{
              'bg-gray-400 cursor-default':
                repo.repoStatus !== repoStatusNeedPull || needSave === true,
              'bg-blue3':
                repo.repoStatus === repoStatusNeedPull && needSave === false
            }"
            (click)="pull()"
            [disabled]="
              repo.repoStatus !== repoStatusNeedPull || needSave === true
            "
            >Pull from Production</button
          >

          <button
            type="button"
            data-cy="blockmlPushButton"
            class="py-2 px-5 text-white rounded font-medium focus:outline-none"
            [ngClass]="{
              'bg-gray-400 cursor-default':
                repo.repoStatus !== repoStatusNeedPush || needSave === true,
              'bg-blue3':
                repo.repoStatus === repoStatusNeedPush && needSave === false
            }"
            (click)="push()"
            [disabled]="
              repo.repoStatus !== repoStatusNeedPush || needSave === true
            "
            >Push to Production</button
          >

          <div class="relative">
            <m-repo-options></m-repo-options>
          </div>
        </div>
      </div>

      <div class="flex flex-row flex-grow mt-6">
        <m-blockml-tree class="flex w-1/3"></m-blockml-tree>

        <div class="flex flex-grow ml-6">
          <div class="bg-white rounded shadow-lg w-full">
            <div
              *ngIf="lastUrl === pathBlockml"
              class="flex justify-center items-center h-full text-xl"
              >Select file...</div
            >

            <router-outlet *ngIf="lastUrl !== pathBlockml"></router-outlet>
          </div>
        </div>
      </div>
    </div>

    <m-blockml-right class="flex w-3/12"></m-blockml-right>
  </div>
</div>

<div *ngIf="routerEvents$ | async"></div>
<div *ngIf="nav$ | async"></div>
<div *ngIf="file$ | async"></div>
<div *ngIf="repo$ | async"></div>
<div *ngIf="needSave$ | async"></div>
