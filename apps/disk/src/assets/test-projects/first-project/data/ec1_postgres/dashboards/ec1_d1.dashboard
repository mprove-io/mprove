dashboard: ec1_d1
title: Ecommerce
parameters:
- filter: order_date
  result: ts
  conditions:
  - last 5 years complete

- filter: product_brand
  result: string
  suggest_model_dimension: ec1_m1.products.brand
  conditions:
  - any
tiles:
- title: Average Sale Price by Category
  model: ec1_m1
  select:
  - products.category
  - order_items.average_sale_price
  sorts: order_items.average_sale_price desc
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 8
    plate_height: 12
    plate_x: 0
    plate_y: 0

- title: Customers by Gender
  model: ec1_m1
  select:
  - users.gender
  - users.count
  sorts: users.gender desc
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: pie
  data:
    x_field: users.gender
    y_field: users.count
  plate:
    plate_width: 8
    plate_height: 12
    plate_x: 8
    plate_y: 0

- title: Profit by Traffic Source
  model: ec1_m1
  select:
  - mf.total_profit
  - users.traffic_source
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: pie
  data:
    x_field: users.traffic_source
    y_field: mf.total_profit
  plate:
    plate_width: 8
    plate_height: 12
    plate_x: 16
    plate_y: 0

- title: Revenue by Time, by First Order Year Cohorts
  model: ec1_m1
  select:
  - user_order_facts.first_order_created___year
  - order_items.total_sale_price
  - orders.created___quarter
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: line
  data:
    x_field: orders.created___quarter
    y_fields:
    - order_items.total_sale_price
    multi_field: user_order_facts.first_order_created___year
  plate:
    plate_width: 12
    plate_height: 12
    plate_x: 0
    plate_y: 12

- title: Top 10 Brands by Sales
  model: ec1_m1
  select:
  - products.brand
  - order_items.total_sale_price
  sorts: order_items.total_sale_price desc
  limit: 10
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: pie
  data:
    x_field: products.brand
    y_field: order_items.total_sale_price
  plate:
    plate_width: 12
    plate_height: 12
    plate_x: 0
    plate_y: 32

- title: Customers
  model: ec1_m1
  select:
  - users.count
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 0
    plate_y: 24

- title: Orders
  model: ec1_m1
  select:
  - orders.count
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 8
    plate_y: 24

- title: Products
  model: ec1_m1
  select:
  - products.count
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 4
    plate_y: 24

- title: $ Sales
  model: ec1_m1
  select:
  - order_items.total_sale_price
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 12
    plate_y: 24

- title: $ Cost
  model: ec1_m1
  select:
  - inventory_items.total_actual_cost
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 16
    plate_y: 24

- title: $ Profit
  model: ec1_m1
  select:
  - mf.total_profit
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: table
  plate:
    plate_width: 4
    plate_height: 8
    plate_x: 20
    plate_y: 24

- title: Dynamics of Sales and Profit
  model: ec1_m1
  select:
  - orders.created___month
  - order_items.total_sale_price
  - mf.total_profit
  sorts: orders.created___month
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: line
  data:
    x_field: orders.created___month
    y_fields:
    - order_items.total_sale_price
    - mf.total_profit
  plate:
    plate_width: 12
    plate_height: 12
    plate_x: 12
    plate_y: 12

- title: Users by Age Group
  model: ec1_m1
  select:
  - users.age_group
  - users.count
  sorts: users.age_group
  parameters:
  - apply_to: orders.created___date
    listen: order_date
  - apply_to: products.brand
    listen: product_brand
  type: bar
  data:
    x_field: users.age_group
    y_fields:
    - users.count
  plate:
    plate_width: 12
    plate_height: 12
    plate_x: 12
    plate_y: 32

- title: Orders Count by Users Age
  model: ec1_m1
  select:
  - orders.count
  - users.age
  sorts: users.age
  type: scatter
  data:
    x_field: users.age
    y_fields:
    - orders.count
  plate:
    plate_width: 12
    plate_height: 12
    plate_x: 0
    plate_y: 44
