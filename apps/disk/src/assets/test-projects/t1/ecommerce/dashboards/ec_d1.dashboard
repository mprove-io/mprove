dashboard: ec_d1
parameters:
- filter: order_date
  result: ts 
  conditions:
  - last 3 years complete
  
- filter: customer_age
  result: number 
  conditions:
  - '[25, 35]'   

tiles:

- title: Average sale price by category
  model: ec_m1
  select:
  - f.category
  - a.average_sale_price_int
  sorts: a.average_sale_price_int desc
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age   
  type: table
  plate:
    plate_width: '4'
    plate_height: '500'

- title: Customers by gender
  model: ec_m1
  select:
  - c.gender
  - c.count
  sorts: c.gender desc 
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age    
  type: pie
  data:
    x_field: c.gender
    y_field: c.count
  plate:
    plate_width: '4'
    plate_height: '500'

- title: Profit by traffic source
  model: ec_m1
  select:
  - mf.total_profit_int
  - c.traffic_source
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age  
  type: pie
  data:
    x_field: c.traffic_source
    y_field: mf.total_profit_int
  plate:
    plate_width: '4'
    plate_height: '500'   
    
- title: Revenue by time, by first order year cohorts
  model: ec_m1
  select:
  - d.first_order___year
  - a.total_sale_price_int
  - b.created___quarter
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age  
  type: line
  data:
    x_field: b.created___quarter
    y_fields:
    - a.total_sale_price_int
    multi_field: d.first_order___year   
    
- title: TOP 20 brands by sales
  model: ec_m1
  select:
  - f.brand
  - a.total_sale_price_int
  sorts: a.total_sale_price_int desc
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age  
  limit: 20
  type: pie
  data:
    x_field: f.brand
    y_field: a.total_sale_price_int

- title: Customers
  model: ec_m1
  select:
  - c.count
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'  

- title: Orders
  model: ec_m1
  select:
  - b.count
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age   
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'    

- title: Products
  model: ec_m1
  select:
  - f.count
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age    
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'

- title: $ Sales
  model: ec_m1
  select:
  - a.total_sale_price_int
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age    
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'

- title: $ Cost
  model: ec_m1
  select:
  - e.total_actual_cost_int
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age    
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'

- title: $ Profit
  model: ec_m1
  select:
  - mf.total_profit_int
  parameters:
  - apply_to: b.created___date
    listen: order_date
  - apply_to: c.age
    listen: customer_age    
  type: table
  plate:
    plate_width: '2'
    plate_height: '300'