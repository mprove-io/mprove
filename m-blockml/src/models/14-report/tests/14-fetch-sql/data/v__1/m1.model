model: m1
connection: c1
# sql_always_where_calc: ${a.dim2} > 5
joins:
- from_view: v1
  as: a

- join_view: v1
  as: b
  sql_on: ${a.dim8} = ${b.dim8}

- join_view: v2
  as: c
  sql_on: ${a.dim8} = ${c.dim1}

fields:
- dimension: dim1
  sql: d1

- time: time1
  sql: ${dim1} + 1  
  timeframes:
  - hour 

- dimension: dim2
  sql: ${time1___hour} + 2

- dimension: dim3
  sql: d3

- dimension: dim4
  sql: ${dim3} + 4  

- dimension: dim5
  sql: d5

- dimension: dim6
  sql: ${dim5} + 6  

- dimension: dim7
  sql: d7

- dimension: dim8
  sql: ${dim7} + 8  

- dimension: dim9
  sql: d9

- dimension: dim10
  sql: ${dim9} + 10   

- measure: mea1
  type: sum_by_key
  sql: ${dim2} + ms1
  sql_key: ${dim4} + mk1

- calculation: calc1
  sql: ${mea1} + ${dim6} + 1 

- calculation: calc2
  sql: ${calc1} + ${dim8} + 2

- calculation: calc3
  sql: ${b.calc2} + ${calc2} + 3  

